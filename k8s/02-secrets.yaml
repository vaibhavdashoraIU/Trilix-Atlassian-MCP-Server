apiVersion: v1
kind: Secret
metadata:
  name: trilix-secrets
  namespace: trilix
type: Opaque
stringData:
  # PostgreSQL credentials
  POSTGRES_USER: "postgres.imtxscoowxdcdyzkarst"
  POSTGRES_PASSWORD: "trilix-atlassian-mcp"
  
  # RabbitMQ credentials
  RABBITMQ_DEFAULT_USER: "trilix"
  RABBITMQ_DEFAULT_PASS: "secret"  # Replace with actual password
  
  # Clerk API keys

  CLERK_API_URL: "https://api.clerk.com"
  CLERK_PUBLISHABLE_KEY: "pk_test_ZGl2aW5lLWdyb3VwZXItOTIuY2xlcmsuYWNjb3VudHMuZGV2JA"
  CLERK_SECRET_KEY: "sk_test_5ZsIDwqqROMSVPBin2rcnPCH74eFPxZaZn9nvcp7Fr"
  
  # Database connection string
  DATABASE_URL: "postgresql://postgres.imtxscoowxdcdyzkarst:trilix-atlassian-mcp@aws-1-eu-west-1.pooler.supabase.com:5432/postgres"

  # OAuth admin token (DCR)
  OAUTH_DCR_ACCESS_TOKEN: "99713cc1e21c6d7564a3076a504bcb6487879a6db32510cae521e2c1559038df"

  # Redis (in-cluster)
  REDIS_URL: "redis://redis.trilix.svc.cluster.local:6379/0"
  
  # Encryption key for credentials
  API_KEY_ENCRYPTION_KEY: "abcdefghijklmnopqrstuvwxyz123456"  # Must be 32 characters
  
---
# Note: For production, use AWS Secrets Manager with External Secrets Operator
# This is a placeholder for development/testing
apiVersion: v1
kind: ConfigMap
metadata:
  name: external-secrets-config
  namespace: trilix
data:
  instructions: |
    To use AWS Secrets Manager in production:
    1. Install External Secrets Operator: kubectl apply -f https://raw.githubusercontent.com/external-secrets/external-secrets/main/deploy/crds/bundle.yaml
    2. Create SecretStore pointing to AWS Secrets Manager
    3. Create ExternalSecret resources to sync secrets
    4. Update deployment to use synced secrets
